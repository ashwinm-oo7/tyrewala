(function(b){function f(){a&&(a.addEventListener("click",function(){c.postMessage({action:"skipWaiting"})}),a.innerText="A new version of this app is available. Click this message to reload.",window.CQ&&window.CQ.I18n&&(a.innerText=window.CQ.I18n.getMessage("A new version of this app is available. Click this message to reload.")),a.className="cmp-page__toastmessageshow")}function g(){d||(window.location.reload(),d=!0)}if("serviceWorker"in navigator){var c=null,a=b.getElementsByClassName("cmp-page__toastmessagehide")[0];
if(b=b.getElementsByName("cq:sw_path")[0]){var h=b.getAttribute("content"),d=!1;window.addEventListener("load",function(){navigator.serviceWorker.register(h).then(function(e){e.addEventListener("updatefound",function(){c=e.installing;c.addEventListener("statechange",function(){"installed"===c.state&&navigator.serviceWorker.controller&&f()})})});navigator.serviceWorker.addEventListener("controllerchange",g)})}}})(document);